<main class="flex flex-col w-full" [formGroup]="form">
  <div class="flex flex-col mb-3">
    <label>Old Password <span class="text-red-500">*</span></label>
    <tui-input-password
      tuiTextfieldSize="m"
      [tuiTextfieldCleaner]="true"
      [tuiTextfieldLabelOutside]="true"
      tuiTextfieldExampleText="Old password here..."
      formControlName="oldPassword"
    >
      <span class="text-gray-300">
        Old password here
        <tui-svg src="tuiIconEdit"></tui-svg>
      </span>
    </tui-input-password>
  </div>

  <div class="flex flex-col mb-3">
    <label>New Password <span class="text-red-500">*</span></label>
    <tui-input-password
      tuiTextfieldSize="m"
      [tuiTextfieldLabelOutside]="true"
      tuiTextfieldExampleText="New Password here..."
      [tuiHintContent]="passwordInfo"
      tuiHintDirection="top-right"
      formControlName="newPassword"
    >
      <span class="text-gray-300">
        New Password here
        <tui-svg src="tuiIconEdit"></tui-svg>
      </span>
    </tui-input-password>
  </div>

  <div class="flex flex-col mb-4">
    <label>Confirm Password <span class="text-red-500">*</span></label>
    <tui-input-password
      tuiTextfieldSize="m"
      [tuiTextfieldLabelOutside]="true"
      tuiTextfieldExampleText="Confirm password here..."
      [tuiHintContent]="confirmedPasswordInfo"
      tuiHintDirection="top-right"
      formControlName="confirmedPassword"
    >
      <span class="text-gray-300">
        Confirm password here
        <tui-svg src="tuiIconEdit"></tui-svg>
      </span>
    </tui-input-password>
  </div>

  <button tuiButton (click)="clickChange$.next()" size="m" [disabled]="form.invalid">Change</button>
</main>

<ng-template #passwordInfo>
  <section class="flex flex-col flex-wrap">
    <div>
      <tui-svg
        [src]="
          form?.get('newPassword')?.errors?.required || form?.get('newPassword')?.errors?.minlength
            ? 'tuiIconCloseCircleLarge'
            : 'tuiIconCheckCircleLarge'
        "
        class="size-s text-green-300"
        [class.text-red-300]="
          form?.get('newPassword')?.errors?.required || form?.get('newPassword')?.errors?.minlength
        "
      ></tui-svg>
      Password has 6 characters at least.
    </div>
    <div>
      <tui-svg
        [src]="
          form?.get('newPassword')?.errors?.required || form?.get('newPassword')?.errors?.maxlength
            ? 'tuiIconCloseCircleLarge'
            : 'tuiIconCheckCircleLarge'
        "
        class="size-s text-green-300"
        [class.text-red-300]="
          form?.get('newPassword')?.errors?.required || form?.get('newPassword')?.errors?.maxlength
        "
      ></tui-svg>
      Password has 16 characters at max.
    </div>
  </section>
</ng-template>
<ng-template #confirmedPasswordInfo>
  <section class="flex flex-col flex-wrap">
    <div>
      <tui-svg
        [src]="
          form?.get('confirmedPassword')?.errors?.required ||
          form?.get('confirmedPassword')?.errors?.minlength
            ? 'tuiIconCloseCircleLarge'
            : 'tuiIconCheckCircleLarge'
        "
        class="size-s text-green-300"
        [class.text-red-300]="
          form?.get('confirmedPassword')?.errors?.required ||
          form?.get('confirmedPassword')?.errors?.minlength
        "
      ></tui-svg>
      Confirm password has 6 characters at least.
    </div>
    <div>
      <tui-svg
        [src]="
          form?.get('confirmedPassword')?.errors?.required ||
          form?.get('confirmedPassword')?.errors?.maxlength
            ? 'tuiIconCloseCircleLarge'
            : 'tuiIconCheckCircleLarge'
        "
        class="size-s text-green-300"
        [class.text-red-300]="
          form?.get('confirmedPassword')?.errors?.required ||
          form?.get('confirmedPassword')?.errors?.maxlength
        "
      ></tui-svg>
      Confirm password has 16 characters at max.
    </div>
    <div>
      <tui-svg
        [src]="
          form?.get('confirmedPassword')?.errors?.isMatching === false
            ? 'tuiIconCloseCircleLarge'
            : 'tuiIconCheckCircleLarge'
        "
        class="size-s text-green-300"
        [class.text-red-300]="form?.get('confirmedPassword')?.errors?.isMatching === false"
      ></tui-svg>
      Confirm password matches the new password.
    </div>
  </section>
</ng-template>
